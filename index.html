<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JDM Products - AI Chatbot Demo</title>
<style>
  /* ── Reset & base ─────────────────────────────────── */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: #0a0a1a;
    overflow: hidden;
    height: 100vh;
    width: 100vw;
  }

  /* ── Screenshot background ──────────────────────────── */
  #site-bg {
    position: fixed; inset: 0;
    width: 100%; height: 100%;
    z-index: 0;
    object-fit: cover;
    object-position: top center;
  }

  /* ── Chat Widget ──────────────────────────────────── */
  #chat-bubble {
    position: fixed; bottom: 28px; right: 28px; z-index: 1000;
    width: 64px; height: 64px; border-radius: 50%;
    background: linear-gradient(135deg, #0055a5, #003d7a);
    box-shadow: 0 4px 20px rgba(0,85,165,.45);
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: transform .2s, box-shadow .2s;
    border: none; outline: none;
  }
  #chat-bubble:hover { transform: scale(1.08); box-shadow: 0 6px 28px rgba(0,85,165,.55); }
  #chat-bubble svg { width: 30px; height: 30px; fill: #fff; }
  #chat-bubble .close-icon { display: none; }
  #chat-bubble.open .chat-icon { display: none; }
  #chat-bubble.open .close-icon { display: block; }

  /* Unread badge */
  .unread-badge {
    position: absolute; top: -2px; right: -2px;
    width: 20px; height: 20px; background: #e63946;
    border-radius: 50%; color: #fff; font-size: 11px;
    font-weight: 700; display: flex; align-items: center; justify-content: center;
    border: 2px solid #fff;
    animation: pulse-badge 2s infinite;
  }
  @keyframes pulse-badge {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.15); }
  }
  .unread-badge.hidden { display: none; }

  /* Chat Window */
  #chat-window {
    position: fixed; bottom: 104px; right: 28px; z-index: 999;
    width: 400px; max-height: 580px; height: 580px;
    background: #fff; border-radius: 16px;
    box-shadow: 0 12px 48px rgba(0,0,0,.18);
    display: flex; flex-direction: column;
    transform: scale(0) translateY(20px);
    transform-origin: bottom right;
    opacity: 0; pointer-events: none;
    transition: transform .3s cubic-bezier(.175,.885,.32,1.275), opacity .2s;
    overflow: hidden;
  }
  #chat-window.open {
    transform: scale(1) translateY(0);
    opacity: 1; pointer-events: auto;
  }

  /* Chat Header */
  .chat-header {
    background: linear-gradient(135deg, #0055a5, #003d7a);
    color: #fff; padding: 18px 20px;
    display: flex; align-items: center; gap: 14px;
    flex-shrink: 0;
  }
  .agent-avatar {
    width: 44px; height: 44px; border-radius: 50%;
    background: rgba(255,255,255,.2); display: flex;
    align-items: center; justify-content: center;
    font-size: 20px; font-weight: 700; flex-shrink: 0;
    border: 2px solid rgba(255,255,255,.3);
  }
  .agent-info h3 { font-size: 16px; font-weight: 700; }
  .agent-info p { font-size: 12px; opacity: .85; margin-top: 2px; }
  .online-dot {
    width: 8px; height: 8px; background: #4ade80;
    border-radius: 50%; display: inline-block; margin-right: 5px;
    box-shadow: 0 0 6px rgba(74,222,128,.6);
  }

  /* Chat Messages */
  .chat-messages {
    flex: 1; overflow-y: auto; padding: 20px;
    display: flex; flex-direction: column; gap: 12px;
    background: #f7f8fa;
    scroll-behavior: smooth;
  }
  .chat-messages::-webkit-scrollbar { width: 5px; }
  .chat-messages::-webkit-scrollbar-track { background: transparent; }
  .chat-messages::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }

  .msg {
    max-width: 82%; padding: 12px 16px;
    border-radius: 16px; font-size: 14px; line-height: 1.5;
    animation: msgIn .3s ease-out;
    word-wrap: break-word;
  }
  @keyframes msgIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .msg.bot {
    align-self: flex-start;
    background: #fff; color: #333;
    border-bottom-left-radius: 4px;
    box-shadow: 0 1px 4px rgba(0,0,0,.06);
  }
  .msg.user {
    align-self: flex-end;
    background: #0055a5; color: #fff;
    border-bottom-right-radius: 4px;
  }
  .msg a { color: inherit; font-weight: 600; text-decoration: underline; }
  .msg.bot a { color: #0055a5; }

  /* Typing indicator */
  .typing-indicator {
    align-self: flex-start;
    display: flex; gap: 5px; padding: 14px 18px;
    background: #fff; border-radius: 16px;
    border-bottom-left-radius: 4px;
    box-shadow: 0 1px 4px rgba(0,0,0,.06);
  }
  .typing-indicator span {
    width: 8px; height: 8px; background: #bbb; border-radius: 50%;
    animation: blink 1.4s infinite both;
  }
  .typing-indicator span:nth-child(2) { animation-delay: .2s; }
  .typing-indicator span:nth-child(3) { animation-delay: .4s; }
  @keyframes blink {
    0%,80%,100% { opacity: .3; transform: scale(.8); }
    40% { opacity: 1; transform: scale(1); }
  }

  /* Chat Input */
  .chat-input-area {
    padding: 14px 16px; background: #fff;
    border-top: 1px solid #eee; display: flex; gap: 10px;
    align-items: center; flex-shrink: 0;
  }
  .chat-input-area input {
    flex: 1; padding: 12px 16px; border: 1.5px solid #ddd;
    border-radius: 24px; font-size: 14px; outline: none;
    transition: border-color .2s;
    font-family: inherit;
  }
  .chat-input-area input:focus { border-color: #0055a5; }
  .chat-input-area button {
    width: 42px; height: 42px; border-radius: 50%;
    background: #0055a5; border: none; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background .15s;
    flex-shrink: 0;
  }
  .chat-input-area button:hover { background: #003d7a; }
  .chat-input-area button svg { width: 18px; height: 18px; fill: #fff; }

  /* Powered by bar */
  .powered-by {
    text-align: center; padding: 6px; background: #fafafa;
    font-size: 10px; color: #aaa; border-top: 1px solid #f0f0f0;
    flex-shrink: 0;
  }

  /* ── Mobile ──────────────────────────────────────── */
  @media (max-width: 768px) {
    #chat-window {
      width: calc(100vw - 16px); right: 8px; bottom: 96px;
      max-height: calc(100vh - 120px);
      height: calc(100vh - 120px);
      border-radius: 12px;
    }
  }
</style>
</head>
<body>

<!-- ── Screenshot background ──── -->
<img id="site-bg" src="screenshot.png" alt="JDM Products Website" />

<!-- ── Chat Bubble ────────────────────────────────── -->
<button id="chat-bubble" onclick="toggleChat()" aria-label="Open chat">
  <svg class="chat-icon" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.2L4 17.2V4h16v12z"/><path d="M7 9h10v2H7zm0-3h10v2H7zm0 6h7v2H7z"/></svg>
  <svg class="close-icon" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
  <div class="unread-badge" id="unread-badge">1</div>
</button>

<!-- ── Chat Window ────────────────────────────────── -->
<div id="chat-window">
  <div class="chat-header">
    <div class="agent-avatar">M</div>
    <div class="agent-info">
      <h3>Michael</h3>
      <p><span class="online-dot"></span>JDM Products &middot; Online</p>
    </div>
  </div>
  <div class="chat-messages" id="chat-messages"></div>
  <div class="chat-input-area">
    <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off" />
    <button onclick="sendMessage()" aria-label="Send"><svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button>
  </div>
  <div class="powered-by">Powered by JDM Products AI &middot; Demo</div>
</div>

<script>
// ── State ────────────────────────────────────────────
const STATE = {
  open: false,
  context: {},
  conversationFlow: null,
  flowStep: 0,
  leadData: {},
  greeted: false
};

const BRANDS = ['garmin','fitbit','tonies','echelon','austere','surefire','aeno','surefire gaming'];
const BRAND_ALIASES = {
  'garman':'garmin','garmen':'garmin','garmon':'garmin',
  'fitbt':'fitbit','fitbitt':'fitbit',
  'tonie':'tonies','tony':'tonies','tonnies':'tonies',
  'echelan':'echelon','echellon':'echelon',
  'austeer':'austere','austre':'austere',
  'surefire':'surefire gaming','sure fire':'surefire gaming',
  'aneo':'aeno','aino':'aeno'
};

function isBusinessHours() {
  const now = new Date();
  const utcH = now.getUTCHours();
  const day = now.getUTCDay();
  return day >= 1 && day <= 5 && utcH >= 9 && utcH < 17;
}

// ── DOM helpers ──────────────────────────────────────
const $msgs = document.getElementById('chat-messages');
const $input = document.getElementById('chat-input');
const $window = document.getElementById('chat-window');
const $bubble = document.getElementById('chat-bubble');
const $badge = document.getElementById('unread-badge');

function scrollBottom() {
  setTimeout(() => { $msgs.scrollTop = $msgs.scrollHeight; }, 60);
}

function addMsg(text, sender) {
  const d = document.createElement('div');
  d.className = 'msg ' + sender;
  d.innerHTML = text;
  $msgs.appendChild(d);
  scrollBottom();
}

function showTyping() {
  const d = document.createElement('div');
  d.className = 'typing-indicator';
  d.id = 'typing';
  d.innerHTML = '<span></span><span></span><span></span>';
  $msgs.appendChild(d);
  scrollBottom();
}

function hideTyping() {
  const t = document.getElementById('typing');
  if (t) t.remove();
}

function botReply(text, delay) {
  const d = delay || (600 + Math.min(text.length * 8, 1200));
  showTyping();
  setTimeout(() => {
    hideTyping();
    addMsg(text, 'bot');
  }, d);
}

// ── Toggle chat ──────────────────────────────────────
function toggleChat() {
  STATE.open = !STATE.open;
  $window.classList.toggle('open', STATE.open);
  $bubble.classList.toggle('open', STATE.open);
  $badge.classList.add('hidden');
  if (STATE.open) {
    $input.focus();
    if (!STATE.greeted) {
      STATE.greeted = true;
      greet();
    }
  }
}

// ── Greet ────────────────────────────────────────────
function greet() {
  const hourNote = isBusinessHours()
    ? "Our team is available right now if you need anything."
    : "Our office is currently closed, but I'm here to help and can have someone follow up when we're back.";
  botReply(
    `Hi there, I'm <strong>Michael</strong> from <strong>JDM Products</strong>. ${hourNote}<br><br>Whether you're looking to become a retail partner, have questions about our brands, or need support with an existing account, I'm happy to help. What can I do for you?`,
    800
  );
}

// ── Send message ─────────────────────────────────────
function sendMessage() {
  const text = $input.value.trim();
  if (!text) return;
  $input.value = '';
  handleUserInput(text);
}
$input.addEventListener('keydown', e => { if (e.key === 'Enter') sendMessage(); });

// ── Main handler ─────────────────────────────────────
function handleUserInput(raw) {
  addMsg(raw, 'user');
  const text = raw.toLowerCase().trim();

  // If we're in a multi-step flow, continue it
  if (STATE.conversationFlow) {
    continueFlow(raw, text);
    return;
  }

  // ── Intent detection ──────────────────────────────

  // Retailer onboarding
  if (match(text, ['become a retailer','open an account','retailer','reseller','partner','onboard','sign up','new account','join','want to sell','want to stock','become a partner','apply','set up an account'])) {
    startRetailerFlow();
    return;
  }

  // Brand / product inquiry
  if (match(text, ['brand','product','stock','distribute','carry','available','range','catalogue','catalog','what do you sell'])) {
    handleBrandInquiry(text);
    return;
  }

  // Check for specific brand mention
  const brand = detectBrand(text);
  if (brand) {
    handleSpecificBrand(brand);
    return;
  }

  // Existing customer support
  if (match(text, ['existing customer','portal','login','log in','can\'t access','order','where\'s my order','tracking','pricing','price list','my account','account manager'])) {
    handleExistingCustomer(text);
    return;
  }

  // Services
  if (match(text, ['services','logistics','marketing','training','events','freight','what do you offer'])) {
    handleServicesInquiry(text);
    return;
  }

  // Regional / expansion
  if (match(text, ['region','country','countries','europe','european','expand','expansion','cover','territory','where do you'])) {
    handleRegional(text);
    return;
  }

  // Buying signals / lead qualification
  if (match(text, ['interested in','talk about','discuss','looking for','considering','exploring'])) {
    handleBuyingSignal(text);
    return;
  }

  // Contact / call
  if (match(text, ['contact','phone','call','email','reach','speak to someone','talk to someone','human'])) {
    handleContact();
    return;
  }

  // Greeting
  if (match(text, ['hi','hello','hey','good morning','good afternoon','good evening','howdy','hiya'])) {
    botReply("Hello! Great to hear from you. How can I help you today?");
    return;
  }

  // Thanks
  if (match(text, ['thanks','thank you','cheers','ta','appreciate'])) {
    botReply("You're very welcome! If anything else comes up, don't hesitate to ask. We're always here to help.");
    return;
  }

  // Goodbye
  if (match(text, ['bye','goodbye','that\'s all','no thanks','all good','no that\'s it'])) {
    botReply("Thanks for chatting with us! Wishing you all the best, and don't hesitate to reach out anytime. Have a great day.");
    return;
  }

  // Urgent
  if (match(text, ['urgent','asap','emergency','immediately','rush'])) {
    handleUrgent(text);
    return;
  }

  // About JDM
  if (match(text, ['about jdm','who is jdm','tell me about','company','history','founded','who are you'])) {
    botReply(
      "JDM Products was established in <strong>1999 by Jonathan Moore</strong> and has grown into an award-winning consumer electronics distributor. We partner with 15+ leading technology brands and serve over 3,000 active retail accounts across Ireland, the UK, and expanding into mainland Europe.<br><br>Is there something specific about JDM I can help you with?"
    );
    return;
  }

  // Fallback
  handleFallback();
}

// ── Helpers ─────────────────────────────────────────
function match(text, keywords) {
  return keywords.some(k => text.includes(k));
}

function detectBrand(text) {
  for (const [alias, real] of Object.entries(BRAND_ALIASES)) {
    if (text.includes(alias)) return real;
  }
  for (const b of BRANDS) {
    if (text.includes(b)) return b;
  }
  return null;
}

function escHtml(s) {
  const d = document.createElement('div');
  d.textContent = s;
  return d.innerHTML;
}

// ── Conversation Flows ──────────────────────────────
function continueFlow(raw, text) {
  const flow = STATE.conversationFlow;
  if (flow === 'retailer') continueRetailerFlow(raw, text);
  else if (flow === 'lead') continueLeadFlow(raw, text);
  else if (flow === 'fallback') continueFallbackFlow(raw, text);
  else if (flow === 'buyingSignal') {
    STATE.leadData.businessType = raw;
    STATE.conversationFlow = 'lead';
    STATE.flowStep = 0;
    botReply("Thanks for that. Could you share your <strong>business name</strong> and <strong>location</strong> so I can point you to the right person?");
  }
  else { STATE.conversationFlow = null; handleUserInput(raw); }
}

// ── Retailer Onboarding Flow ────────────────────────
function startRetailerFlow() {
  STATE.conversationFlow = 'retailer';
  STATE.flowStep = 0;
  STATE.leadData = {};
  botReply(
    "That's great to hear — we're always keen to connect with new retail partners. I'll just need a few details to get things moving.<br><br>First off, what <strong>type of retail business</strong> do you operate? For example, an electronics shop, online store, department store, or something else?"
  );
}

function continueRetailerFlow(raw, text) {
  const step = STATE.flowStep;
  if (step === 0) {
    STATE.leadData.businessType = raw;
    STATE.flowStep = 1;
    botReply("Perfect. And where are you <strong>based</strong>? Ireland, UK, or elsewhere in Europe?");
  } else if (step === 1) {
    STATE.leadData.location = raw;
    STATE.context.location = raw;
    STATE.flowStep = 2;
    botReply("Good to know. What <strong>brands do you currently stock</strong>? Just a general idea is fine — it helps our team understand your business better.");
  } else if (step === 2) {
    STATE.leadData.currentBrands = raw;
    STATE.flowStep = 3;
    botReply(
      "Excellent. JDM works with over <strong>3,000 active retail accounts</strong> and distributes 15+ leading technology brands including Garmin, Fitbit, Tonies, and more — so I'm confident we can find some great opportunities together.<br><br>Could I get your <strong>business name</strong>?"
    );
  } else if (step === 3) {
    STATE.leadData.businessName = raw;
    STATE.flowStep = 4;
    botReply("And your <strong>name</strong> and <strong>role or title</strong>?");
  } else if (step === 4) {
    STATE.leadData.contactName = raw;
    STATE.flowStep = 5;
    botReply("What's the best <strong>email address</strong> to reach you at?");
  } else if (step === 5) {
    STATE.leadData.email = raw;
    STATE.flowStep = 6;
    botReply("And a <strong>phone number</strong> in case our team needs to reach you directly?");
  } else if (step === 6) {
    STATE.leadData.phone = raw;
    STATE.conversationFlow = null;
    const name = STATE.leadData.contactName.split(' ')[0];
    const loc = STATE.leadData.location;
    const office = (loc && loc.toLowerCase().includes('uk')) ? 'UK' : 'Ireland';
    botReply(
      `Thanks so much, <strong>${escHtml(name)}</strong>. I've passed your details along to our <strong>${office} sales team</strong>. They'll be in touch at <strong>${escHtml(STATE.leadData.email)}</strong> within <strong>1 business day</strong> to discuss partnership opportunities and next steps.<br><br>In the meantime, is there anything else I can help you with?`
    );
    console.log('[LEAD CAPTURED]', JSON.stringify(STATE.leadData, null, 2));
  }
}

// ── Lead Qualification Flow ─────────────────────────
function startLeadFlow(context) {
  STATE.conversationFlow = 'lead';
  STATE.flowStep = 0;
  STATE.leadData = { inquiry: context || '' };
  botReply("I'd love to get you connected with the right person. Could you share your <strong>business name</strong> and <strong>location</strong>?");
}

function continueLeadFlow(raw, text) {
  const step = STATE.flowStep;
  if (step === 0) {
    STATE.leadData.businessInfo = raw;
    STATE.flowStep = 1;
    botReply("Great, and your <strong>name</strong>, <strong>email</strong>, and <strong>phone number</strong> so our team can follow up?");
  } else if (step === 1) {
    STATE.leadData.contactInfo = raw;
    STATE.flowStep = 2;
    botReply("One last thing — are you looking to <strong>get started right away</strong>, or is this more of an exploratory conversation for the future?");
  } else if (step === 2) {
    STATE.leadData.timeline = raw;
    STATE.conversationFlow = null;
    botReply(
      "Thanks for sharing all of that. I'll have one of our <strong>sales managers</strong> reach out to you shortly to discuss how JDM can support your business.<br><br>Anything else I can help with in the meantime?"
    );
    console.log('[LEAD CAPTURED]', JSON.stringify(STATE.leadData, null, 2));
  }
}

// ── Fallback lead capture ───────────────────────────
function startFallbackFlow(context) {
  STATE.conversationFlow = 'fallback';
  STATE.flowStep = 0;
  STATE.leadData = { question: context || '' };
  botReply("Of course. Could I get your <strong>name</strong> and <strong>business name</strong>?");
}

function continueFallbackFlow(raw, text) {
  const step = STATE.flowStep;
  if (step === 0) {
    STATE.leadData.name = raw;
    STATE.flowStep = 1;
    botReply("And your <strong>email</strong> or <strong>phone number</strong> so our team can get back to you?");
  } else if (step === 1) {
    STATE.leadData.contact = raw;
    STATE.conversationFlow = null;
    const tf = isBusinessHours() ? 'within a few hours' : 'within 24 hours';
    botReply(
      `Thank you. I've flagged your query and someone from JDM will reach out ${tf}.<br><br>Is there anything else I can help with in the meantime?`
    );
    console.log('[FALLBACK LEAD]', JSON.stringify(STATE.leadData, null, 2));
  }
}

// ── Intent Handlers ─────────────────────────────────

function handleBrandInquiry(text) {
  botReply(
    "JDM distributes a strong portfolio of leading technology brands including <strong>Garmin</strong>, <strong>Fitbit</strong>, <strong>Tonies</strong>, <strong>Echelon</strong>, <strong>Austere</strong>, <strong>SureFire Gaming</strong>, <strong>AENO</strong>, and over 15 others.<br><br>If there's a specific brand you're interested in, just let me know and I can give you more detail. Or if you'd like to explore stocking any of these, I can get our sales team in touch."
  );
}

function handleSpecificBrand(brand) {
  const bn = brand.charAt(0).toUpperCase() + brand.slice(1);
  botReply(
    `Yes, JDM is an authorised distributor of <strong>${escHtml(bn)}</strong> and we carry a strong range for our retail partners.<br><br>If you're an existing customer, you can check current stock levels and pricing on the portal at <a href='https://b2b.jdmproducts.com' target='_blank'>b2b.jdmproducts.com</a>. Otherwise, I'd be happy to collect your details and have our team reach out to discuss ${escHtml(bn)} specifically. Just let me know.`
  );
}

function handleExistingCustomer(text) {
  if (match(text, ['portal','login','log in','can\'t access','access'])) {
    botReply(
      "You can access the JDM B2B portal at <a href='https://b2b.jdmproducts.com' target='_blank'>b2b.jdmproducts.com</a>. If you need to set up a new account, head to <a href='https://b2b.jdmproducts.com/account/create' target='_blank'>b2b.jdmproducts.com/account/create</a>.<br><br>If you're having trouble logging in, just let me know and I'll get our support team to help you out."
    );
  } else {
    const loc = STATE.context.location;
    const phone = (loc && loc.toLowerCase().includes('uk'))
      ? '<strong>UK: 0203 4815711</strong>'
      : '<strong>Ireland: 01 2050500</strong> or <strong>UK: 0203 4815711</strong>';
    botReply(
      `For orders, stock availability, and pricing, your <strong>dedicated account manager</strong> is the best person to help. You can also reach us directly at ${phone}.<br><br>If you'd like, give me your account name and I'll have your account manager get in touch.`
    );
  }
}

function handleServicesInquiry(text) {
  if (match(text, ['logistics','freight','delivery','shipping'])) {
    botReply(
      "JDM operates a <strong>pan-European freight network</strong> with warehouse and distribution facilities in both <strong>Ireland and the UK</strong>. We handle everything from storage through to last-mile delivery for our brand and retail partners.<br><br>If you'd like to discuss your specific logistics requirements, I can connect you with our operations team — just say the word."
    );
  } else if (match(text, ['marketing','social','brand awareness','co-marketing'])) {
    botReply(
      "We offer a full range of marketing services — social media support, co-marketing opportunities, brand awareness campaigns, and both digital and in-store marketing. It's all about driving sell-through for our retail partners.<br><br>Would you like me to arrange a conversation with our marketing team?"
    );
  } else if (match(text, ['training','events','trade show'])) {
    botReply(
      "JDM regularly runs trade shows, B2B events, product training sessions for retail staff, and consumer events. They're a brilliant way to build product knowledge and drive sales in-store.<br><br>If you're interested in upcoming events or want to arrange training for your team, I can get the right person to reach out."
    );
  } else {
    botReply(
      "JDM offers a complete suite of distribution services:<br><br><strong>Logistics</strong> — Pan-European freight network with facilities in Ireland and the UK.<br><strong>Sales Management</strong> — Regional sales team covering UK and Ireland, managing 3,000+ accounts.<br><strong>Marketing</strong> — Social media, co-marketing, and brand awareness campaigns.<br><strong>Events &amp; Training</strong> — Trade shows, B2B events, and product training for retail staff.<br><br>Which of these is most relevant to you? I'm happy to go into more detail or connect you with the right team."
    );
  }
}

function handleRegional(text) {
  botReply(
    "Our core markets are <strong>Ireland</strong> and the <strong>UK</strong>, where we have warehouse facilities and dedicated regional sales teams. In 2022 we expanded into <strong>5 additional EU countries</strong>, and our European network continues to grow.<br><br>If you're looking for distribution coverage in a specific region, let me know the country and I can connect you with the right regional manager."
  );
}

function handleBuyingSignal(text) {
  STATE.conversationFlow = 'buyingSignal';
  STATE.leadData = { inquiry: text };
  botReply(
    "That's great to hear. To make sure I connect you with the right person, could you tell me a bit about your business — what type of retail operation are you running?"
  );
}

function handleContact() {
  botReply(
    "You can reach the JDM team directly:<br><br><strong>Ireland:</strong> +353 1 2050500<br><strong>UK:</strong> +44 203 4815711<br><strong>Website:</strong> <a href='https://jdmproducts.com' target='_blank'>jdmproducts.com</a><br><strong>B2B Portal:</strong> <a href='https://b2b.jdmproducts.com' target='_blank'>b2b.jdmproducts.com</a><br><br>Or if you'd prefer, I can take your details and have the right team member reach out to you directly."
  );
}

function handleUrgent(text) {
  botReply(
    "I completely understand — let me make sure this gets priority attention. For the fastest response, I'd recommend calling us directly:<br><br><strong>Ireland:</strong> +353 1 2050500<br><strong>UK:</strong> +44 203 4815711<br><br>Alternatively, share your details with me here and I'll flag it as <strong>priority</strong> so our team picks it up immediately."
  );
}

function handleFallback() {
  botReply(
    "That's a great question — I want to make sure you get the best possible answer. Let me connect you with the right person on our team. Could I grab your name and contact details so someone can get back to you?"
  );
  STATE.conversationFlow = 'fallback';
  STATE.flowStep = 0;
  STATE.leadData = {};
}
</script>
</body>
</html>
